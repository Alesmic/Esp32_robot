#include "act.h"

// ---------------------------------------------------------
// 随机动作逻辑
// ---------------------------------------------------------
// 这是一个概率状态机，让机器人的行为不可预测，看起来更像活物
void random_act() {
  // 生成 0 到 99 的随机数
  int random_num = random(100);
  
  // 生成随机的注视坐标 (让眼神和头部朝向不固定)
  // X轴范围：-25(左) ~ 25(右)
  // Y轴范围：-20(上) ~ 45(下)
  int x = random(-25, 25); 
  int y = random(-20, 45);

  // --- 概率分层逻辑 ---

  // [10% 概率]：开心模式
  // 模拟机器人突然想到什么开心的事情
  if (random_num < 10) {
    eye_happy(); // 显示笑眼
    // 可选：在这里添加 head_nod() 点头动作会更生动
  } 
  
  // [20% 概率]：好奇观察模式 (10 <= num < 30)
  // 模拟机器人被周围环境吸引，转头观察
  else if (random_num < 30) {
    // 头部转动到随机坐标，速度为 10ms/度
    head_move(x, y, 10);
    
    // *细节联动*：让眼球方向跟随头部转动方向
    if (x > 0) {
      eye_right(); // 头向右转，眼球向右看
    } else {
      eye_left();  // 头向左转，眼球向左看
    }
    
    delay(1000); // 保持观察姿态 1 秒
  } 
  
  // [70% 概率]：待机眨眼 (30 <= num < 100)
  // 这是最基础的生物特征，高频出现可以避免屏幕烧屏，也最自然
  else {
    eye_blink();
  }
  
  // 动作结束后，复位到默认状态
  // 这一步很重要，防止机器人长时间保持扭曲姿态
  head_center();
  eye_center();
}